(()=>{"use strict";var e={479:(e,t,n)=>{e.exports=n.p+"8b18ab21318e3b31f7d8.wasm"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,(()=>{var e={};n.r(e),n.d(e,{captured_piece:()=>f,clear_board:()=>u,moved_piece:()=>_,put_den:()=>i,put_grass:()=>d,put_piece:()=>s,put_trap:()=>a,put_water:()=>l,setImportObject:()=>c,won:()=>b});let t,r={};function o(e){if(!e)throw new Error("assertion failed")}function c(e){o(e.den),o(e.trap),o(e.piece),o(e.clear),o(e.grass),o(e.water),o(e.won),o(e.movedPiece),o(e.capturedPiece),r=e}function i(e,t,n){r.den(e,t,n)}function a(e,t,n){r.trap(e,t,n)}function s(e,t,n,o){r.piece(e,t,n,o)}function u(){r.clear()}function d(e,t){r.grass(e,t)}function l(e,t){r.water(e,t)}function b(e){r.won(e)}function f(e,t,n,o){r.capturedPiece(e,t,n,o)}function _(e,t,n,o,c,i){r.movedPiece(e,t,n,o,c,i)}const g=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});g.decode();let w=null;function p(){return null!==w&&w.buffer===t.memory.buffer||(w=new Uint8Array(t.memory.buffer)),w}function m(e,t){return g.decode(p().subarray(e,e+t))}const y=new Array(32).fill(void 0);y.push(void 0,null,!0,!1);let h=y.length;function v(e){h===y.length&&y.push(y.length+1);const t=h;return h=y[t],y[t]=e,t}function L(e){return y[e]}function E(e){const t=L(e);return function(e){e<36||(y[e]=h,h=e)}(e),t}let A=0;const I=new TextEncoder("utf-8"),C="function"==typeof I.encodeInto?function(e,t){return I.encodeInto(e,t)}:function(e,t){const n=I.encode(e);return t.set(n),{read:e.length,written:n.length}};function S(e,t,n){if(void 0===n){const n=I.encode(e),r=t(n.length);return p().subarray(r,r+n.length).set(n),A=n.length,r}let r=e.length,o=t(r);const c=p();let i=0;for(;i<r;i++){const t=e.charCodeAt(i);if(t>127)break;c[o+i]=t}if(i!==r){0!==i&&(e=e.slice(i)),o=n(o,r,r=i+3*e.length);const t=p().subarray(o+i,o+r);i+=C(e,t).written}return A=i,o}function T(e,n){try{return e.apply(this,n)}catch(e){t.__wbindgen_exn_store(v(e))}}function B(e,t){return p().subarray(e/1,e/1+t)}const j=async function r(o){void 0===o&&(o=new URL(n(479),n.b));const c={wbg:{}};c.wbg.__wbg_won_6a23aae01969bfe1=function(e,t){b(m(e,t))},c.wbg.__wbg_capturedpiece_4f478a33a8bd04ae=function(e,t,n,r,o,c){f(e,t,m(n,r),m(o,c))},c.wbg.__wbg_movedpiece_2a26b11d64890ba0=function(e,t,n,r,o,c,i){_(e,t,n,r,m(o,c),0!==i)},c.wbg.__wbg_puttrap_e795dd5418709f15=function(e,t,n,r){a(e,t,m(n,r))},c.wbg.__wbg_putden_8120e86afb544e30=function(e,t,n,r){i(e,t,m(n,r))},c.wbg.__wbg_putpiece_1b352c81c1bb8e71=function(e,t,n,r,o,c){s(e,t,m(n,r),m(o,c))},c.wbg.__wbindgen_json_parse=function(e,t){return v(JSON.parse(m(e,t)))},c.wbg.__wbg_getRandomValues_fb6b088efb6bead2=function(){return T((function(e,t){L(e).getRandomValues(L(t))}),arguments)},c.wbg.__wbg_randomFillSync_654a7797990fb8db=function(){return T((function(e,t,n){L(e).randomFillSync(B(t,n))}),arguments)},c.wbg.__wbg_process_70251ed1291754d5=function(e){return v(L(e).process)},c.wbg.__wbindgen_is_object=function(e){const t=L(e);return"object"==typeof t&&null!==t},c.wbg.__wbg_versions_b23f2588cdb2ddbb=function(e){return v(L(e).versions)},c.wbg.__wbindgen_object_drop_ref=function(e){E(e)},c.wbg.__wbg_node_61b8c9a82499895d=function(e){return v(L(e).node)},c.wbg.__wbindgen_is_string=function(e){return"string"==typeof L(e)},c.wbg.__wbg_static_accessor_NODE_MODULE_33b45247c55045b0=function(){return v(d)},c.wbg.__wbg_require_2a93bc09fee45aca=function(){return T((function(e,t,n){return v(L(e).require(m(t,n)))}),arguments)},c.wbg.__wbg_crypto_2f56257a38275dbd=function(e){return v(L(e).crypto)},c.wbg.__wbg_msCrypto_d07655bf62361f21=function(e){return v(L(e).msCrypto)},c.wbg.__wbg_newnoargs_e23b458e372830de=function(e,t){return v(new Function(m(e,t)))},c.wbg.__wbg_call_ae78342adc33730a=function(){return T((function(e,t){return v(L(e).call(L(t)))}),arguments)},c.wbg.__wbindgen_object_clone_ref=function(e){return v(L(e))},c.wbg.__wbg_self_99737b4dcdf6f0d8=function(){return T((function(){return v(self.self)}),arguments)},c.wbg.__wbg_window_9b61fbbf3564c4fb=function(){return T((function(){return v(window.window)}),arguments)},c.wbg.__wbg_globalThis_8e275ef40caea3a3=function(){return T((function(){return v(globalThis.globalThis)}),arguments)},c.wbg.__wbg_global_5de1e0f82bddcd27=function(){return T((function(){return v(n.g.global)}),arguments)},c.wbg.__wbindgen_is_undefined=function(e){return void 0===L(e)},c.wbg.__wbg_buffer_7af23f65f6c64548=function(e){return v(L(e).buffer)},c.wbg.__wbg_new_cc9018bd6f283b6f=function(e){return v(new Uint8Array(L(e)))},c.wbg.__wbg_set_f25e869e4565d2a2=function(e,t,n){L(e).set(L(t),n>>>0)},c.wbg.__wbg_length_0acb1cf9bbaf8519=function(e){return L(e).length},c.wbg.__wbg_newwithlength_8f0657faca9f1422=function(e){return v(new Uint8Array(e>>>0))},c.wbg.__wbg_subarray_da527dbd24eafb6b=function(e,t,n){return v(L(e).subarray(t>>>0,n>>>0))},c.wbg.__wbindgen_throw=function(e,t){throw new Error(m(e,t))},c.wbg.__wbindgen_memory=function(){return v(t.memory)},c["./snippets/native-b653630efb6aa1b2/index.js"]=e,("string"==typeof o||"function"==typeof Request&&o instanceof Request||"function"==typeof URL&&o instanceof URL)&&(o=fetch(o));const{instance:u,module:d}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await o,c);return t=u.exports,r.__wbindgen_wasm_module=d,t};let O=[],k="blue",M=[],P=!1,x=1;function R(){O=function(e){const n=S(e,t.__wbindgen_malloc,t.__wbindgen_realloc),r=A;return E(t.get_next_moves(n,r))}(k).Ok}function N(){"blue"===k?k="red":"red"===k&&(k="blue"),U()}function U(){document.getElementById("to-turn").innerHTML="<b class="+k+">"+k+"</b>'s turn"}function W(e,t){return"tile-"+e+"-"+t}function q(e,t){return document.getElementById(W(e,t))}function F(){!function(e,n){const r=S(e,t.__wbindgen_malloc,t.__wbindgen_realloc),o=A;E(t.make_ai_move(r,o,n))}(k,x),N(),R()}function D(){M.forEach((e=>{e.img&&e.img.parentNode&&e.img.parentNode.removeChild(e.img),e.abort()})),M=[]}function H(e,n){D(),O.filter((t=>e===t[0]&&n===t[1])).flatMap((e=>e[2])).forEach((r=>function(e,t,n){const r=q(e,t),o=new AbortController;r.addEventListener("click",n,{once:!0,capture:!0,signal:o.signal});const c=document.createElement("img");c.classList.add("target"),c.alt="target",c.src="assets/target.svg",r.appendChild(c),M.push({img:c,abort:()=>o.abort()})}(r[0],r[1],(()=>{return o=e,c=n,i=r[0],a=r[1],function(e,n,r,o,c){const i=S(e,t.__wbindgen_malloc,t.__wbindgen_realloc),a=A;E(t.make_move(i,a,n,r,o,c))}(k,o,c,i,a),D(),N(),void(P?F():R());var o,c,i,a}))))}function $(){t.new_game(),U(),R()}document.addEventListener("DOMContentLoaded",(()=>(c({clear(){k="blue",document.getElementById("messages").classList.add("hide");const e=document.getElementById("board");e.innerHTML="";for(let t=0;t<9;++t)for(let n=0;n<7;++n){const r=document.createElement("button");r.addEventListener("click",(()=>H(n,t)),{},!0),r.classList.add("tile"),r.id=W(n,t),e.appendChild(r)}},den(e,t,n){const r=q(e,t);r.classList.add("den"),r.classList.add(n);const o=document.createElement("img");o.alt=n+" den",o.src="assets/den.svg",o.classList.add("den"),r.appendChild(o)},trap(e,t,n){const r=q(e,t);r.classList.add("trap");const o=document.createElement("img");o.alt=n+" trap",o.src="assets/trap.svg",o.classList.add("trap"),r.appendChild(o)},piece(e,t,n,r){const o=q(e,t);o.classList.add(n),o.classList.add("piece"),o.classList.add(r),o.setAttribute("data-player",n),o.setAttribute("data-piece",r);const c=document.createElement("img");c.alt=n+" "+r,c.src="assets/"+r+".svg",c.classList.add("piece"),o.appendChild(c)},grass(e,t){q(e,t).classList.add("grass")},water(e,t){q(e,t).classList.add("water")},won(e){D(),document.getElementById("board").innerHTML="",document.getElementById("messages").classList.remove("hide");const t=document.getElementById("winner");t.innerHTML="Player "+e+" won!",t.className=e},movedPiece(e,t,n,r,o,c){const i=q(e,t);if(!i)return;const a=i.getAttribute("data-piece"),s=i.getAttribute("data-player");i.classList.remove("piece"),i.classList.remove(a),i.classList.remove(s),[...i.childNodes].filter((e=>e.classList.contains("piece"))).forEach((e=>i.removeChild(e)));const u=q(n,r);if(c){const e=u.getAttribute("data-player"),t=u.getAttribute("data-piece");u.classList.remove(e),u.classList.remove(t),[...u.childNodes].filter((e=>e.classList.contains("piece"))).forEach((e=>u.removeChild(e)))}const d=document.createElement("img");d.classList.add("piece"),d.alt=o+" "+a,d.src="assets/"+a+".svg",u.appendChild(d),u.setAttribute("data-player",s),u.setAttribute("data-piece",a),u.classList.add("piece"),u.classList.add(a),u.classList.add(s),i.removeAttribute("data-player"),i.removeAttribute("data-piece")},capturedPiece(e,t,n,r){console.log(e,t,n,r)}}),void j().then((()=>{const e=document.getElementById("new-local-game"),t=(document.getElementById("ai-difficulty"),document.getElementById("new-ai-game"));e.onclick=()=>{P=!1,$()},t.onclick=()=>{P=!0;const e=document.querySelectorAll('input[name="ai-level"]');for(const t of e)if(console.log(t),t.checked){x=parseInt(t.value);break}const t=document.getElementById("play-as-red").checked;$(),t&&F()}})))),{once:!0})})()})();